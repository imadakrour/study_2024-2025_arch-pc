---
## Front matter
title: "Шаблон отчёта по лабораторной работе"
subtitle: " Лабораторная работа №5.Основы работы с
 Midnight Commander (mc).Структура программы на
 языке ассемблера NASM.Системные вызовы в ОС
 GNU Linux"
author: "Акрур Имад НКАбд-06-24"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true # Table of contents
toc-depth: 2
lof: true # List of figures
lot: true # List of tables
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
	- spelling=modern
	- babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Цель работы : 
Приобретение практических навыков работы в Midnight Commander.Освоение инструкций
 языка ассемблера mov и int
 
# Описание результатов выполнения лабораторной работы:

## описание выполняемого задания : 

### 1. Открытие Midnight Commander

Сначала мы открываем Midnight Commander, чтобы удобно работать с файлами. Это делается с помощью команды:

```
imadakrour:~$ mc
```

![рисунок 01](/home/imadakrour/Pictures/lab05/01.png){#fig:0001 width=70%}  

*Комментарий: Вот как выглядит Midnight Commander после запуска. Очень удобно, особенно для навигации по файлам и папкам!*

### 2. Переход в каталог ~/work/arch-pc

После открытия Midnight Commander, мы переходим в каталог `~/work/arch-pc`, который мы создали во время выполнения лабораторной работы №4. Это можно сделать с помощью клавиш на клавиатуре.

![рисунок 02](/home/imadakrour/Pictures/lab05/02.png){#fig:0002 width=70%}  

*Комментарий: Мы находимся в каталоге `arch-pc`. Важно убедиться, что мы в нужном месте перед тем, как продолжать!*

### 3. Создание файла lab5-1.asm

Теперь мы создаем новый файл `lab5-1.asm`. Для этого используем команду `touch` в строке ввода:

```
imadakrour:~$ touch lab5-1.asm
```
![рисунок 03](/home/imadakrour/Pictures/lab05/03.png){#fig:0003 width=70%}  


*Комментарий: Файл `lab5-1.asm` успешно создан. Это будет наш первый файл для написания кода на ассемблере.*

### 4. Открытие файла lab5-1.asm для редактирования

Далее мы открываем файл `lab5-1.asm` для редактирования с помощью функциональной клавиши F4. В Midnight Commander встроенный редактор обычно либо `nano`, либо `mcedit`.


### 5. Ввод текста программы

Теперь вводим текст программы из листинга 5.1 (можно без комментариев). После того как введем текст, не забываем сохранить изменения и закрыть файл.


### 6. Просмотр файла lab5-1.asm

После редактирования открываем файл `lab5-1.asm` для просмотра с помощью F3. Это позволит нам убедиться, что все записано правильно.

![рисунок 04](/home/imadakrour/Pictures/lab05/04.png){#fig:0004 width=70%}  


*Комментарий: Проверяем файл. Всё выглядит хорошо, код на месте!*

### 7. Трансляция программы в объектный файл

Теперь мы переводим текст программы в объектный файл. Для этого используем NASM и LD:

```
imadakrour:~$ nasm -f elf lab5-1.asm
imadakrour:~$ ld -m elf_i386 -o lab5-1 lab5-1.o
```


После этого запускаем исполняемый файл:

```
imadakrour:~$ ./lab5-1
Введите строку:
```


### 8. Ввод ваших ФИО

На запрос вводим свои ФИО.

```
Имя пользователя
```
![рисунок 05](/home/imadakrour/Pictures/lab05/05.png){#fig:0005 width=70%}  

![рисунок 06](/home/imadakrour/Pictures/lab05/06.png){#fig:0006 width=70%}  



*Комментарий: Вводим свои данные. Это часть, когда мы тестируем, как программа реагирует на ввод!*

### 9. Скачивание файла in_out.asm


Следующим шагом скачиваем файл `in_out.asm` со страницы курса в ТУИС. Этот файл будет содержать подпрограммы, которые нам понадобятся.

![рисунок 07](/home/imadakrour/Pictures/lab05/07.png){#fig:0007 width=70%}  




*Комментарий: Скачивание файла `in_out.asm`. Это важно для следующих шагов в лабораторной работе!*

### 10. Копирование файла in_out.asm

Убедитесь, что файл `in_out.asm` находится в том же каталоге, что и `lab5-1.asm`. В одной из панелей Midnight Commander открываем каталог с `lab5-1.asm`, а в другой — каталог со скачанным файлом. Используем функциональную клавишу F5 для копирования.


![рисунок 08](/home/imadakrour/Pictures/lab05/08.png){#fig:0008 width=70%}  

![рисунок 09](/home/imadakrour/Pictures/lab05/09.png){#fig:0009 width=70%}  

![рисунок 10](/home/imadakrour/Pictures/lab05/10.png){#fig:0010 width=70%}  



*Комментарий: Копируем `in_out.asm` в нужный каталог. Теперь у нас есть все необходимые файлы!*

### 11. Создание копии lab5-1.asm

Теперь создаем копию файла `lab5-1.asm` с именем `lab5-2.asm` с помощью F6. Это позволяет нам работать с новой версией программы, не теряя оригинал.

![рисунок 11](/home/imadakrour/Pictures/lab05/11.png){#fig:0011 width=70%}  


*Комментарий: Создаем копию. Всегда полезно иметь резервную копию оригинального файла!*

### 12. Исправление текста программы в lab5-2.asm

Теперь мы изменяем текст программы в `lab5-2.asm`, используя подпрограммы из `in_out.asm` (например, `sprintLF`, `sread` и `quit`). После этого создаем исполняемый файл и проверяем его работу.

![рисунок 12](/home/imadakrour/Pictures/lab05/12.png){#fig:0012 width=70%}  
 


*Комментарий: Внесенные изменения. Теперь программа должна использовать новые подпрограммы!*

### 13. Замена подпрограммы sprintLF на sprint

Наконец, мы заменяем подпрограмму `sprintLF` на `sprint` в `lab5-2.asm`. После этого создаем исполняемый файл и проверяем его работу.

![рисунок 13](/home/imadakrour/Pictures/lab05/13.png){#fig:0013 width=70%}  

![рисунок 14](/home/imadakrour/Pictures/lab05/14.png){#fig:0014 width=70%} 

![рисунок 15](/home/imadakrour/Pictures/lab05/15.png){#fig:0015 width=70%}  


*Комментарий: Подпрограмма заменена, всё готово к тестированию. Важно понимать разницу между `sprint` и `sprintLF`: первая просто выводит строку, а вторая — с добавлением новой строки!*


## выводы по результатам выполнения заданий

В ходе лабораторной работы мы создали и изменили ассемблерные файлы, научились работать с Midnight Commander, а также использовали подпрограммы из внешнего файла. Это был полезный опыт в работе с ассемблером и системным программированием!

# Описание результатов выполнения заданийдля самостоятельной работы:


## описание выполняемого задания:

###  Создание копии файлах lab5-1.asm lab5-2.asm in_out.asm : 


Сначала мы создаем копию файла `lab5-1.asm`. Это нужно, чтобы внести изменения, не затрагивая оригинал. 

![рисунок 16](/home/imadakrour/Pictures/lab05/16.png){#fig:0016 width=70%}  

*Комментарий: Копия файла создана. Теперь у нас есть оригинал и копия для работы!*


###  Получение исполняемого файла

После внесения изменений, мы трансформируем наш ассемблерный файл в объектный файл и компилируем его в исполняемый файл. Вот команды, которые мы используем:

```bash
imadakrour:~$ nasm -f elf lab5-1.asm
imadakrour:~$ nasm -f elf lab5-2.asm


imadakrour:~$ ld -m elf_i386 -o lab5-1 lab5-1.o
imadakrour:~$ ld -m elf_i386 -o lab5-2 lab5-2.o
```


### 4. Проверка работы программы

Теперь запускаем исполняемый файл и вводим свои ФИО, когда программа запрашивает строку.

```bash

imadakrour:~$ ./lab5-1
imadakrour:~$ ./lab5-2

```
![рисунок 17](/home/imadakrour/Pictures/lab05/17.png){#fig:0017 width=70%}  

*Комментарий: Программа корректно запрашивает ввод. Вводим свои данные — это всегда интересный момент!*

## выводы по результатам выполнения заданий : 

В ходе самостоятельной работы мы изменили несколько ассемблерных файлов, проверили их работу и узнали, как использовать подпрограммы из внешнего файла. Это дало нам полезный опыт в написании и компиляции кода на ассемблере!



# Вопросы для самопроверки : 


## 1. Каково назначение mc?
**Ответ:** `mc` (Midnight Commander) — это текстовый файловый менеджер для UNIX-подобных систем, который позволяет пользователям удобно управлять файлами и каталогами через графический интерфейс.

## 2. Какие операции с файлами можно выполнить как с помощью команд bash, так и с помощью меню (комбинаций клавиш) mc? Приведите несколько примеров.
**Ответ:** 
- **Копирование файлов:** можно использовать команду `cp` в bash или сочетание клавиш F5 в `mc`.
- **Перемещение файлов:** можно использовать команду `mv` в bash или F6 в `mc`.
- **Удаление файлов:** команда `rm` в bash и F8 в `mc`.

## 3. Какова структура программы на языке ассемблера NASM?
**Ответ:** Программа на языке ассемблера NASM состоит из следующих секций: `.data` (для инициализированных данных), `.bss` (для неинициализированных данных) и `.text` (для кода программы).

## 4. Для описания каких данных используются секции bss и data в языке ассемблера NASM?
**Ответ:** 
- **Секция `.data`:** используется для хранения инициализированных данных (например, строки, массивы).
- **Секция `.bss`:** используется для хранения неинициализированных данных (например, переменные, которые не имеют начального значения).

## 5. Для чего используются компоненты db, dw, dd, dq и dt языка ассемблера NASM?
**Ответ:** 
- **`db`:** для объявления байтов (1 байт).
- **`dw`:** для объявления слов (2 байта).
- **`dd`:** для объявления двойных слов (4 байта).
- **`dq`:** для объявления Quad слов (8 байт).
- **`dt`:** для объявления десятичных значений (различные размеры).

## 6. Какое произойдет действие при выполнении инструкции mov eax, esi?
**Ответ:** Инструкция `mov eax, esi` копирует значение из регистра `esi` в регистр `eax`.

## 7. Для чего используется инструкция int 80h?
**Ответ:** Инструкция `int 80h` используется для вызова системных вызовов в Linux, позволяя программе взаимодействовать с операционной системой.

## Выводы,согласованные с целью работы : 

Мы освоили язык ассемблера **NASM**, включая работу с файлами, структуру программ и взаимодействие с операционной системой. Эти навыки углубили наше понимание программирования на низком уровне.










