---
## Front matter
title: "–®–∞–±–ª–æ–Ω –æ—Ç—á—ë—Ç–∞ –ø–æ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç–µ"
subtitle: "–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ6.–ê—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ NASM."
author: "–ê–∫—Ä—É—Ä –ò–º–∞–¥ –ù–ö–ê–±–¥-06-24"

## Generic otions
lang: ru-RU
toc-title: "–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true # Table of contents
toc-depth: 2
lof: true # List of figures
lot: true # List of tables
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
	- spelling=modern
	- babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "–†–∏—Å."
tableTitle: "–¢–∞–±–ª–∏—Ü–∞"
listingTitle: "–õ–∏—Å—Ç–∏–Ω–≥"
lofTitle: "–°–ø–∏—Å–æ–∫ –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–π"
lotTitle: "–°–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü"
lolTitle: "–õ–∏—Å—Ç–∏–Ω–≥–∏"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# –¶–µ–ª—å —Ä–∞–±–æ—Ç—ã

–û—Å–≤–æ–µ–Ω–∏–µ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π —è–∑—ã–∫–∞ –∞—Å—Å–µ–º–±–ª–µ—Ä–∞ NASM.

# –û–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç—ã:

##  –°–∏–º–≤–æ–ª—å–Ω—ã–µ –∏ —á–∏—Å–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ NASM

1. –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ —Å–æ–∑–¥–∞–Ω–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é: 

```bash
cd ~/work/study/2024-2025/–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞/arch-pc/labs/lab06/report
```

2. –°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º—ã: 

```bash
touch lab6-1.asm
```

![–°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã lab6-1.asm](/home/imadakrour/Pictures/lab06/1.png){#fig:0001 width=70%}

   
–ö–æ–º–∞–Ω–¥–∞ `touch` —Å–æ–∑–¥–∞—ë—Ç –ø—É—Å—Ç–æ–π —Ñ–∞–π–ª —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –∏–º–µ–Ω–µ–º, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–∂–µ –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–º –∫–æ–¥–æ–º. 


### –ù–∞–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –¥–ª—è –≤—ã–≤–æ–¥–∞ –∑–Ω–∞—á–µ–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤

–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–≤–æ–¥–∏—Ç –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ `eax` –∏ `ebx` –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π —Å –Ω–∏–º–∏. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è NASM –∏ –ø–æ–¥–∫–ª—é—á–∞–µ–º—ã–π —Ñ–∞–π–ª `in_out.asm` –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã —Å –≤–≤–æ–¥–æ–º –∏ –≤—ã–≤–æ–¥–æ–º. 


1. –û—Ç–∫—Ä—ã–≤–∞–µ–º —Ñ–∞–π–ª `lab6-1.asm` –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: 

```bash
gedit lab6-1.asm]
```

2. –í–≤–æ–¥–∏–º —Ç–µ–∫—Å—Ç –ø—Ä–æ–≥—Ä–∞–º–º—ã: 

```asm
%include 'in_out.asm'
SECTION .bss
buf1: RESB 80
SECTION .text
GLOBAL _start
_start:
   mov eax, '6'
   mov ebx, '4'
   add eax, ebx
   mov [buf1], eax
   mov eax, buf1
   call sprintLF
   call quit
```
   
![–û—Ç–∫—Ä—ã—Ç–∏–µ —Ñ–∞–π–ª–∞ lab6-1.asm –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ](/home/imadakrour/Pictures/lab06/2.png){#fig:0002 width=70%}

3. –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ñ–∞–π–ª –∏ –≤—ã—Ö–æ–¥–∏–º –∏–∑ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞

4. –°–æ–∑–¥–∞–Ω–∏–µ –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞ 

- –ö–æ–º–ø–∏–ª–∏—Ä—É–µ–º –ø—Ä–æ–≥—Ä–∞–º–º—É: 

```bash
nasm -f elf lab6-1.asm
```

![–ö–æ–º–ø–∏–ª—è—Ü–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã lab6-1.asm](/home/imadakrour/Pictures/lab06/3.png){#fig:0003 width=70%}
   
- –õ–∏–Ω–∫—É–µ–º —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `ld`: 

```bash
ld -m elf_i386 -o lab6-1 lab6-1.o
```
 
![–õ–∏–Ω–∫–æ–≤–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã ld](/home/imadakrour/Pictures/lab06/4.png){#fig:0004 width=70%}
   
- –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ–≥—Ä–∞–º–º—É: 

```bash
./lab6-1
```

![–ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã –∏ –≤—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (—Å–∏–º–≤–æ–ª 'j')](/home/imadakrour/Pictures/lab06/5.png){#fig:0005 width=70%}

–ù–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ –±—ã–ª–∞ –Ω–∞–ø–∏—Å–∞–Ω–∞ –∏ —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞, –∫–æ—Ç–æ—Ä–∞—è —Å–∫–ª–∞–¥—ã–≤–∞–µ—Ç ASCII-–∫–æ–¥—ã —Å–∏–º–≤–æ–ª–æ–≤ `'6'` –∏ `'4'`. –†–µ–∑—É–ª—å—Ç–∞—Ç–æ–º —Å–ª–æ–∂–µ–Ω–∏—è —Å—Ç–∞–ª —Å–∏–º–≤–æ–ª —Å –∫–æ–¥–æ–º `106` (—Å–∏–º–≤–æ–ª `'j'`), —á—Ç–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —Ä–∞–±–æ—Ç—É –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –∫–æ–¥–æ–≤ —Å–∏–º–≤–æ–ª–æ–≤.



####  –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —á–∏—Å–ª–∞–º–∏  

–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∏–∑–º–µ–Ω–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É —Ç–∞–∫, —á—Ç–æ–±—ã –≤–º–µ—Å—Ç–æ —Å–∏–º–≤–æ–ª–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å —á–∏—Å–ª–∞. –í —Ä–µ–≥–∏—Å—Ç—Ä—ã `eax` –∏ `ebx` –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è —á–∏—Å–ª–∞ `6` –∏ `4`, –∏—Ö —Å—É–º–º–∞ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è, –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–≤–æ–¥–∏—Ç—Å—è. 


1. –û—Ç–∫—Ä—ã–≤–∞–µ–º —Ñ–∞–π–ª `lab6-1.asm` –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: 

```bash
gedit lab6-1.asm
```
      
2. –ò–∑–º–µ–Ω—è–µ–º —Å—Ç—Ä–æ–∫–∏: 

```asm
mov eax, 6
mov ebx, 4
```

![–ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —á–∏—Å–ª–∞–º–∏ –≤–º–µ—Å—Ç–æ —Å–∏–º–≤–æ–ª–æ–≤](/home/imadakrour/Pictures/lab06/6.png){#fig:0006 width=70%}

4. –ü–æ–≤—Ç–æ—Ä—è–µ–º –∫–æ–º–ø–∏–ª—è—Ü–∏—é –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ: 

```bash
nasm -f elf lab6-1.asm
ld -m elf_i386 -o lab6-1 lab6-1.o
./lab6-1
```

![–ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã —Å —á–∏—Å–ª–∞–º–∏ –∏ –≤—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ ](/home/imadakrour/Pictures/lab06/7.png){#fig:0007 width=70%}


–ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ –ø–æ–∑–≤–æ–ª–∏–ª–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å —á–∏—Å–ª–∞–º–∏, –∞ –Ω–µ —Å —Å–∏–º–≤–æ–ª–∞–º–∏. –û–¥–Ω–∞–∫–æ –ø—Ä–∏ –≤—ã–≤–æ–¥–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º —Å—Ç–∞–ª —Å–∏–º–≤–æ–ª —Å –∫–æ–¥–æ–º `10` (–Ω–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞). –≠—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å —Ç–µ–º, —á—Ç–æ –≤ —Ä–µ–≥–∏—Å—Ç—Ä–µ —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è ASCII-–∫–æ–¥ —á–∏—Å–ª–∞, –∞ –Ω–µ —Å–∞–º–æ —á–∏—Å–ª–æ.



### –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è –ø–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—é —Ç–µ–∫—Å—Ç–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã –∏ –∞–Ω–∞–ª–∏–∑—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

####  –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –∏ –≤–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `lab6-2.asm`:

```bash
touch ~/work/arch-pc/lab06/lab6-2.asm
```


![–°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã lab6-2.asm](/home/imadakrour/Pictures/lab06/8.png){#fig:0008 width=70%}

—Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥ –≤ —Ñ–∞–π–ª `lab6-2.asm`:

```asm
%include 'in_out.asm'

SECTION .text
GLOBAL _start

_start:
    mov eax, '6'      ; –ó–∞–≥—Ä—É–∑–∫–∞ ASCII-–∫–æ–¥–∞ —Å–∏–º–≤–æ–ª–∞ '6' –≤ —Ä–µ–≥–∏—Å—Ç—Ä EAX
    mov ebx, '4'      ; –ó–∞–≥—Ä—É–∑–∫–∞ ASCII-–∫–æ–¥–∞ —Å–∏–º–≤–æ–ª–∞ '4' –≤ —Ä–µ–≥–∏—Å—Ç—Ä EBX
    add eax, ebx      ; –°–ª–æ–∂–µ–Ω–∏–µ –∫–æ–¥–æ–≤ —Å–∏–º–≤–æ–ª–æ–≤
    call iprintLF     ; –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≤—ã–≤–æ–¥–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Å –ø–µ—Ä–µ–≤–æ–¥–æ–º —Å—Ç—Ä–æ–∫–∏
    call quit         ; –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã
```

![–í–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã –¥–ª—è —Å–ª–æ–∂–µ–Ω–∏—è ASCII-–∫–æ–¥–æ–≤ –≤ lab6-2.asm](/home/imadakrour/Pictures/lab06/9.png){#fig:0009 width=70%}

####  –ö–æ–º–ø–∏–ª—è—Ü–∏—è –∏ –∑–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã

–í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∏ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã:

```bash
nasm -f elf lab6-2.asm
ld -m elf_i386 -o lab6-2 lab6-2.o
./lab6-2
```
![–ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã lab6-2.asm –∏ –≤—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (106)](/home/imadakrour/Pictures/lab06/10.png){#fig:0010 width=70%}


**–†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 

–ü—Ä–æ–≥—Ä–∞–º–º–∞ –≤—ã–≤–µ–¥–µ—Ç —á–∏—Å–ª–æ **106**, —Ç–∞–∫ –∫–∞–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–ª–æ–∂–µ–Ω–∏–µ ASCII-–∫–æ–¥–æ–≤ —Å–∏–º–≤–æ–ª–æ–≤ `'6'` –∏ `'4'` (54 + 52 = 106). 
–§—É–Ω–∫—Ü–∏—è `iprintLF` –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–≤–µ—Å—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–ª–æ–∂–µ–Ω–∏—è –∫–∞–∫ —á–∏—Å–ª–æ.


####  –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–∏–º–≤–æ–ª–æ–≤ –Ω–∞ —á–∏—Å–ª–∞

–ó–∞–º–µ–Ω–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏: 

```asm
mov eax, '6'
mov ebx, '4'
```
–Ω–∞: 

```asm
mov eax, 6
mov ebx, 4
```

![–∑–º–µ–Ω–µ–Ω–∏–µ —Å–∏–º–≤–æ–ª–æ–≤ –Ω–∞ —á–∏—Å–ª–∞](/home/imadakrour/Pictures/lab06/11.png){#fig:0011 width=70%}

–û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –∫–æ–¥:

```asm
%include 'in_out.asm'

SECTION .text
GLOBAL _start

_start:
    mov eax, 6         ; –ó–∞–≥—Ä—É–∑–∫–∞ —á–∏—Å–ª–∞ 6 –≤ —Ä–µ–≥–∏—Å—Ç—Ä EAX
    mov ebx, 4         ; –ó–∞–≥—Ä—É–∑–∫–∞ —á–∏—Å–ª–∞ 4 –≤ —Ä–µ–≥–∏—Å—Ç—Ä EBX
    add eax, ebx       ; –°–ª–æ–∂–µ–Ω–∏–µ —á–∏—Å–µ–ª
    call iprintLF      ; –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≤—ã–≤–æ–¥–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Å –ø–µ—Ä–µ–≤–æ–¥–æ–º —Å—Ç—Ä–æ–∫–∏
    call quit          ; –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã
```



####  –ö–æ–º–ø–∏–ª—è—Ü–∏—è –∏ –∑–∞–ø—É—Å–∫ –æ–±–Ω–æ–≤–ª—ë–Ω–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã

```bash
nasm -f elf lab6-2.asm
ld -m elf_i386 -o lab6-2 lab6-2.o
./lab6-2
```

![–ö–æ–º–ø–∏–ª—è—Ü–∏—è –∏ –∑–∞–ø—É—Å–∫ –æ–±–Ω–æ–≤–ª—ë–Ω–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã](/home/imadakrour/Pictures/lab06/12.png){#fig:0012 width=70%}

**–†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 

–ü—Ä–æ–≥—Ä–∞–º–º–∞ –≤—ã–≤–µ–¥–µ—Ç **10**, —Ç–∞–∫ –∫–∞–∫ —Ç–µ–ø–µ—Ä—å —Å–∫–ª–∞–¥—ã–≤–∞—é—Ç—Å—è —á–∏—Å–ª–∞, –∞ –Ω–µ ASCII-–∫–æ–¥—ã. –≠—Ç–æ —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–∏–º–≤–æ–ª–æ–≤ –∏ —á–∏—Å–µ–ª.



####  –ó–∞–º–µ–Ω–∞ `iprintLF` –Ω–∞ `iprint`

–ó–∞–º–µ–Ω–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:

```asm
call iprintLF
```
–Ω–∞:

```asm
call iprint
```

![–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤—ã–≤–æ–¥–∞ –Ω–∞ iprint ](/home/imadakrour/Pictures/lab06/13.png){#fig:0013 width=70%}


#### –ö–æ–º–ø–∏–ª—è—Ü–∏—è –∏ –∑–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã —Å `iprint`


```bash
nasm -f elf lab6-2.asm
ld -m elf_i386 -o lab6-2 lab6-2.o
./lab6-2
```



![–ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã —Å iprint –∏ –≤—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –Ω–∞ —Ç–æ–π –∂–µ —Å—Ç—Ä–æ–∫–µ.)](/home/imadakrour/Pictures/lab06/14.png){#fig:0014 width=70%}

**–†–∞–∑–ª–∏—á–∏–µ –º–µ–∂–¥—É `iprintLF` –∏ `iprint`:** 

- `iprintLF` –≤—ã–≤–æ–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –∫—É—Ä—Å–æ—Ä –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É. 
- `iprint` –ø—Ä–æ—Å—Ç–æ –≤—ã–≤–æ–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –æ—Å—Ç–∞–≤–∞—è—Å—å –Ω–∞ —Ç–æ–π –∂–µ —Å—Ç—Ä–æ–∫–µ. 
–í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—É–¥–µ—Ç **10**, –Ω–æ –∫—É—Ä—Å–æ—Ä –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –≤ –∫–æ–Ω—Ü–µ —á–∏—Å–ª–∞.



###  –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤ NASM 

–ù–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É, –≤—ã—á–∏—Å–ª—è—é—â—É—é —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã—Ä–∞–∂–µ–Ω–∏—è \( f(x) = (5 * 2 + 3)/3 \). –†–µ–∑—É–ª—å—Ç–∞—Ç –∏ –æ—Å—Ç–∞—Ç–æ–∫ –æ—Ç –¥–µ–ª–µ–Ω–∏—è –≤—ã–≤–æ–¥—è—Ç—Å—è –Ω–∞ —ç–∫—Ä–∞–Ω. 


1. –°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª `lab6-3.asm`: 

```bash
touch lab6-3.asm
```
   

![–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤—ã—Ä–∞–∂–µ–Ω–∏—è f(x)= (5‚ãÖ2+3)/3](/home/imadakrour/Pictures/lab06/15.png){#fig:0015 width=70%}



2. –í–≤–æ–¥–∏–º —Ç–µ–∫—Å—Ç –ø—Ä–æ–≥—Ä–∞–º–º—ã: 

```asm
%include 'in_out.asm'
SECTION .data
div: DB '–†–µ–∑—É–ª—å—Ç–∞—Ç: ', 0
rem: DB '–û—Å—Ç–∞—Ç–æ–∫ –æ—Ç –¥–µ–ª–µ–Ω–∏—è: ', 0
SECTION .text
GLOBAL _start
_start:
   mov eax, 5
   mov ebx, 2
   mul ebx
   add eax, 3
   xor edx, edx
   mov ebx, 3
   div ebx
   mov edi, eax
   mov eax, div
   call sprint
   mov eax, edi
   call iprintLF
   mov eax, rem
   call sprint
mov eax, edx
   call iprintLF
   call quit
```

![–í–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã](/home/imadakrour/Pictures/lab06/16.png){#fig:0016 width=70%}


3. –ö–æ–º–ø–∏–ª–∏—Ä—É–µ–º –∏ –∑–∞–ø—É—Å–∫–∞–µ–º: 

```bash
nasm -f elf lab6-3.asm
ld -m elf_i386 -o lab6-3 lab6-3.o
./lab6-3
```

![–†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–†–µ–∑—É–ª—å—Ç–∞—Ç: 4, –û—Å—Ç–∞—Ç–æ–∫ –æ—Ç –¥–µ–ª–µ–Ω–∏—è: 1)](/home/imadakrour/Pictures/lab06/17.png){#fig:0017 width=70%}

–ü—Ä–æ–≥—Ä–∞–º–º–∞ —É—Å–ø–µ—à–Ω–æ –≤—ã—á–∏—Å–ª—è–µ—Ç –∑–∞–¥–∞–Ω–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ. –û—Å—Ç–∞—Ç–æ–∫ –æ—Ç –¥–µ–ª–µ–Ω–∏—è –∏ —Ü–µ–ª–∞—è —á–∞—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. 


–ò–∑–º–µ–Ω–∏—Ç–µ —Ç–µ–∫—Å—Ç –ø—Ä–æ–≥—Ä–∞–º–º—ã –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤—ã—Ä–∞–∂–µ–Ω–∏—è ùëì(ùë•) = (4 ‚àó 6 + 2)/5. –°–æ–∑–¥–∞–π—Ç–µ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª–∏–ø—Ä–æ–≤–µ—Ä—å—Ç–µ –µ–≥–æ —Ä–∞–±–æ—Ç—É : 

![–í–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã](/home/imadakrour/Pictures/lab06/18.png){#fig:0018 width=70%}

![–†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–†–µ–∑—É–ª—å—Ç–∞—Ç: 5, –û—Å—Ç–∞—Ç–æ–∫ –æ—Ç –¥–µ–ª–µ–Ω–∏—è: 1)](/home/imadakrour/Pictures/lab06/19.png){#fig:0019 width=70%}


4. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–∞ –∑–∞–¥–∞–Ω–∏—è –ø–æ –Ω–æ–º–µ—Ä—É —Å—Ç—É–¥–µ–Ω—á–µ—Å–∫–æ–≥–æ –±–∏–ª–µ—Ç–∞

–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É, –∫–æ—Ç–æ—Ä–∞—è –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –Ω–æ–º–µ—Ä —Å—Ç—É–¥–µ–Ω—á–µ—Å–∫–æ–≥–æ –±–∏–ª–µ—Ç–∞, –≤—ã—á–∏—Å–ª—è–µ—Ç –Ω–æ–º–µ—Ä –≤–∞—Ä–∏–∞–Ω—Ç–∞ –ø–æ —Ñ–æ—Ä–º—É–ª–µ \( \text{Variant} = (\text{Sn mod 20}) + 1 \), –∏ –≤—ã–≤–æ–¥–∏—Ç –µ–≥–æ. 

- –°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª `variant.asm`: 

```bash
touch ~/work/arch-pc/lab06/variant.asm
```
   
![–°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª `variant.asm`](/home/imadakrour/Pictures/lab06/20.png){#fig:0020 width=70%}


-  –í–≤–æ–¥–∏–º —Ç–µ–∫—Å—Ç –ø—Ä–æ–≥—Ä–∞–º–º—ã: 

```asm
;--------------------------------
; –ü—Ä–æ–≥—Ä–∞–º–º–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–∞
;--------------------------------
%include 'in_out.asm'
SECTION .data
msg: DB '–í–≤–µ–¥–∏—Ç–µ ‚Ññ —Å—Ç—É–¥–µ–Ω—á–µ—Å–∫–æ–≥–æ –±–∏–ª–µ—Ç–∞: ', 0
rem: DB '–í–∞—à –≤–∞—Ä–∏–∞–Ω—Ç: ', 0
SECTION .bss
x: RESB 80
SECTION .text
GLOBAL _start
_start:
   mov eax, msg          ; –≤—ã–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è
   call sprintLF
   mov ecx, x            ; —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –±—É—Ñ–µ—Ä –¥–ª—è –≤–≤–æ–¥–∞
   mov edx, 80           ; –¥–ª–∏–Ω–∞ –≤–≤–æ–¥–∞
   call sread            ; –≤–≤–æ–¥ –Ω–æ–º–µ—Ä–∞ —Å—Ç—É–¥–µ–Ω—á–µ—Å–∫–æ–≥–æ –±–∏–ª–µ—Ç–∞
   mov eax, x            ; –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∏–∑ ASCII –≤ —á–∏—Å–ª–æ
   call atoi
   xor edx, edx          ; –æ–±–Ω—É–ª–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞ edx
   mov ebx, 20           ; –¥–µ–ª–∏—Ç–µ–ª—å –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–∏ mod
   div ebx               ; –¥–µ–ª–µ–Ω–∏–µ, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ eax, –æ—Å—Ç–∞—Ç–æ–∫ –≤ edx
   inc edx               ; +1 –∫ –æ—Å—Ç–∞—Ç–∫—É
   mov eax, rem          ; —Å–æ–æ–±—â–µ–Ω–∏–µ '–í–∞—à –≤–∞—Ä–∏–∞–Ω—Ç: '
   call sprint
   mov eax, edx          ; –≤—ã–≤–æ–¥ –æ—Å—Ç–∞—Ç–∫–∞ (—Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞)
   call iprintLF
   call quit             ; –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã
```

-  –ö–æ–º–ø–∏–ª–∏—Ä—É–µ–º –∏ –∑–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ–≥—Ä–∞–º–º—É:

```bash
nasm -f elf variant.asm
ld -m elf_i386 -o variant variant.o
./variant
```

![–†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã (`–í–∞—à –≤–∞—Ä–∏–∞–Ω—Ç: 3`)](/home/imadakrour/Pictures/lab06/21.png){#fig:0021 width=70%}



–ü—Ä–æ–≥—Ä–∞–º–º–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–æ–º–µ—Ä —Å—Ç—É–¥–µ–Ω—á–µ—Å–∫–æ–≥–æ –±–∏–ª–µ—Ç–∞, —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –Ω–æ–º–µ—Ä –≤–∞—Ä–∏–∞–Ω—Ç–∞, –∏—Å–ø–æ–ª—å–∑—É—è –æ—Å—Ç–∞—Ç–æ–∫ –æ—Ç –¥–µ–ª–µ–Ω–∏—è –Ω–∞ 20, –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –µ–¥–∏–Ω–∏—Ü—É. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ç–æ—á–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç, —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å –Ω–æ–º–µ—Ä–æ–º —Å—Ç—É–¥–µ–Ω—Ç–∞. 



### –û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ø–æ –ª–∏—Å—Ç–∏–Ω–≥—É 6.4

#### –ö–∞–∫–∏–µ —Å—Ç—Ä–æ–∫–∏ –ª–∏—Å—Ç–∏–Ω–≥–∞ 6.4 –æ—Ç–≤–µ—á–∞—é—Ç –∑–∞ –≤—ã–≤–æ–¥ –Ω–∞ —ç–∫—Ä–∞–Ω —Å–æ–æ–±—â–µ–Ω–∏—è ‚Äò–í–∞—à –≤–∞—Ä–∏–∞–Ω—Ç:‚Äô?

–ó–∞ –≤—ã–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è "–í–∞—à –≤–∞—Ä–∏–∞–Ω—Ç:" –æ—Ç–≤–µ—á–∞—é—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç—Ä–æ–∫–∏: 

```asm
mov eax, rem  ; –ó–∞–≥—Ä—É–∑–∫–∞ –∞–¥—Ä–µ—Å–∞ —Å—Ç—Ä–æ–∫–∏ "–í–∞—à –≤–∞—Ä–∏–∞–Ω—Ç:" –≤ —Ä–µ–≥–∏—Å—Ç—Ä eax
call sprint   ; –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≤—ã–≤–æ–¥–∞ —Å—Ç—Ä–æ–∫–∏ –Ω–∞ —ç–∫—Ä–∞–Ω
```



####  –î–ª—è —á–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏?

```asm
mov ecx, x    ; –ó–∞–≥—Ä—É–∑–∫–∞ –∞–¥—Ä–µ—Å–∞ –±—É—Ñ–µ—Ä–∞ –¥–ª—è –≤–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–≥–∏—Å—Ç—Ä ecx
mov edx, 80   ; –£–∫–∞–∑–∞–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –≤–≤–æ–¥–∏–º–æ–π —Å—Ç—Ä–æ–∫–∏ (80 –±–∞–π—Ç)
call sread    ; –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Å—á–∏—Ç—ã–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** 

–≠—Ç–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ —á—Ç–µ–Ω–∏—é –¥–∞–Ω–Ω—ã—Ö —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã. 
- `mov ecx, x`: —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∞–¥—Ä–µ—Å, –∫—É–¥–∞ –±—É–¥–µ—Ç –∑–∞–ø–∏—Å–∞–Ω –≤–≤–æ–¥. 
- `mov edx, 80`: —É–∫–∞–∑—ã–≤–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–º–≤–æ–ª–æ–≤, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–Ω–æ –≤–≤–µ—Å—Ç–∏. 
- `call sread`: –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –≤–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º. 



####  –î–ª—è —á–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è `call atoi`?  

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è `call atoi` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Å—Ç—Ä–æ–∫–∏, —Å–æ–¥–µ—Ä–∂–∞—â–µ–π —Å–∏–º–≤–æ–ª—ã ASCII, –≤–≤–µ–¥—ë–Ω–Ω–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º, –≤ —á–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ. –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥—ã —á–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤–≤–æ–¥–∏–º–æ–≥–æ —á–∏—Å–ª–∞ –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤ —Ä–µ–≥–∏—Å—Ç—Ä–µ `eax`.



####  –ö–∞–∫–∏–µ —Å—Ç—Ä–æ–∫–∏ –ª–∏—Å—Ç–∏–Ω–≥–∞ 6.4 –æ—Ç–≤–µ—á–∞—é—Ç –∑–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–∞?

–ó–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–∞ –ø–æ —Ñ–æ—Ä–º—É–ª–µ ((Sn mod 20) + 1) –æ—Ç–≤–µ—á–∞—é—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç—Ä–æ–∫–∏:  
```asm
xor edx, edx  ; –û–±–Ω—É–ª–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞ EDX –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–µ–ª–µ–Ω–∏—è
mov ebx, 20   ; –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–µ–ª–∏—Ç–µ–ª—è (20) –≤ —Ä–µ–≥–∏—Å—Ç—Ä EBX
div ebx       ; –î–µ–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ EAX –Ω–∞ EBX, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ EAX, –æ—Å—Ç–∞—Ç–æ–∫ –≤ EDX
inc edx       ; –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–∞ –Ω–∞ 1
```



####  –í –∫–∞–∫–æ–π —Ä–µ–≥–∏—Å—Ç—Ä –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –æ—Å—Ç–∞—Ç–æ–∫ –æ—Ç –¥–µ–ª–µ–Ω–∏—è –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ `div ebx`? 

–û—Å—Ç–∞—Ç–æ–∫ –æ—Ç –¥–µ–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ —Ä–µ–≥–∏—Å—Ç—Ä `EDX`.



####  –î–ª—è —á–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è `inc edx`?

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è `inc edx` —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –≤ —Ä–µ–≥–∏—Å—Ç—Ä–µ `EDX` –Ω–∞ 1. –≠—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è 1 –∫ –æ—Å—Ç–∞—Ç–∫—É –æ—Ç –¥–µ–ª–µ–Ω–∏—è, —á—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ñ–æ—Ä–º—É–ª–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–∞ ((Sn mod 20) + 1).



####  –ö–∞–∫–∏–µ —Å—Ç—Ä–æ–∫–∏ –ª–∏—Å—Ç–∏–Ω–≥–∞ 6.4 –æ—Ç–≤–µ—á–∞—é—Ç –∑–∞ –≤—ã–≤–æ–¥ –Ω–∞ —ç–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π? 
–ó–∞ –≤—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –Ω–∞ —ç–∫—Ä–∞–Ω –æ—Ç–≤–µ—á–∞—é—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç—Ä–æ–∫–∏: 

```asm
mov eax, edx  ; –ü–µ—Ä–µ–Ω–æ—Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (–≤–∞—Ä–∏–∞–Ω—Ç–∞) –∏–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞ EDX –≤ EAX
call iprintLF ; –í—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤ –≤–∏–¥–µ —á–∏—Å–ª–∞ –Ω–∞ —ç–∫—Ä–∞–Ω —Å –ø–µ—Ä–µ–≤–æ–¥–æ–º —Å—Ç—Ä–æ–∫–∏
```


### –≤—ã–≤–æ–¥—ã –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏–π : 

–í —Ö–æ–¥–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç—ã –±—ã–ª–∏ –∏–∑—É—á–µ–Ω—ã –±–∞–∑–æ–≤—ã–µ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞ —è–∑—ã–∫–µ –∞—Å—Å–µ–º–±–ª–µ—Ä–∞ NASM, —Ç–∞–∫–∏–µ –∫–∞–∫ —Å–ª–æ–∂–µ–Ω–∏–µ, —É–º–Ω–æ–∂–µ–Ω–∏–µ, –¥–µ–ª–µ–Ω–∏–µ –∏ —Ä–∞–±–æ—Ç–∞ —Å –æ—Å—Ç–∞—Ç–∫–æ–º. –¢–∞–∫–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏ –≤ ASCII-—Ñ–æ—Ä–º–∞—Ç–µ –∏ —á–∏—Å–ª–∞–º–∏, –≤–∫–ª—é—á–∞—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ in_out.asm.


#  –û–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏–π–¥–ª—è —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã: 

## –æ–ø–∏—Å–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω—è–µ–º–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è : 

1. **–°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª –ø—Ä–æ–≥—Ä–∞–º–º—ã**: 

```bash
   touch ~/work/arch-pc/lab06/test.asm
```

![–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ ](/home/imadakrour/Pictures/lab06/22.png){#fig:0022 width=70%}


2. **–¢–µ–∫—Å—Ç –ø—Ä–æ–≥—Ä–∞–º–º—ã**: 

```asm
;-------------------------------------
; –ü—Ä–æ–≥—Ä–∞–º–º–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ f(x)
; –í–∞—Ä–∏–∞–Ω—Ç 3: f(x) = (2 + x)^2
;-------------------------------------
%include 'in_out.asm'
SECTION .data
expr: DB 'f(x) = (2 + x)^2', 0
prompt1: DB '–í–≤–µ–¥–∏—Ç–µ x1: ', 0
prompt2: DB '–í–≤–µ–¥–∏—Ç–µ x2: ', 0
result1: DB '–†–µ–∑—É–ª—å—Ç–∞—Ç f(x1): ', 0
result2: DB '–†–µ–∑—É–ª—å—Ç–∞—Ç f(x2): ', 0
SECTION .bss
buf: RESB 80
SECTION .text
GLOBAL _start
_start:
    ; –í—ã–≤–æ–¥ –≤—ã—Ä–∞–∂–µ–Ω–∏—è
    mov eax, expr
    call sprintLF

    ; –ó–∞–ø—Ä–æ—Å –≤–≤–æ–¥–∞ x1
    mov eax, prompt1
    call sprintLF
    mov ecx, buf
    mov edx, 80
    call sread             ; –í–≤–æ–¥ –∑–Ω–∞—á–µ–Ω–∏—è x1
    mov eax, buf
    call atoi              ; –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ ASCII –≤ —á–∏—Å–ª–æ (x1 –≤ eax)

    ; –í—ã—á–∏—Å–ª–µ–Ω–∏–µ f(x1) = (2 + x1)^2
    add eax, 2             ; eax = 2 + x1
    mov ebx, eax           ; –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ (2 + x1) –≤ ebx
    mul ebx                ; eax = eax * ebx = (2 + x1)^2
    mov edi, eax           ; –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ f(x1) –≤ edi

    ; –í—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ f(x1)
    mov eax, result1
    call sprint
    mov eax, edi
    call iprintLF

    ; –ó–∞–ø—Ä–æ—Å –≤–≤–æ–¥–∞ x2
    mov eax, prompt2
    call sprintLF
    mov ecx, buf
    mov edx, 80
    call sread             ; –í–≤–æ–¥ –∑–Ω–∞—á–µ–Ω–∏—è x2
    mov eax, buf
    call atoi              ; –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ ASCII –≤ —á–∏—Å–ª–æ (x2 –≤ eax)

    ; –í—ã—á–∏—Å–ª–µ–Ω–∏–µ f(x2) = (2 + x2)^2
    add eax, 2             ; eax = 2 + x2
    mov ebx, eax           ; –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ (2 + x2) –≤ ebx
    mul ebx                ; eax = eax * ebx = (2 + x2)^2
    mov edi, eax           ; –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ f(x2) –≤ edi

    ; –í—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ f(x2)
    mov eax, result2
    call sprint
    mov eax, edi
    call iprintLF

    ; –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã
    call quit

```
![–¢–µ–∫—Å—Ç –ø—Ä–æ–≥—Ä–∞–º–º—ã](/home/imadakrour/Pictures/lab06/23.png){#fig:0023 width=70%}

3. –ö–æ–º–ø–∏–ª–∏—Ä—É–µ–º –∏ –∑–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ–≥—Ä–∞–º–º—É:

```bash
nasm -f elf test.asm
ld -m elf_i386 -o test test.o
./test
```

![–í—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞](/home/imadakrour/Pictures/lab06/24.png){#fig:0024 width=70%}



–ü—Ä–æ–≥—Ä–∞–º–º–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤—ã—Ä–∞–∂–µ–Ω–∏—è \( f(x) = (2 + x)^2 \). –í —Ö–æ–¥–µ —Ä–∞–±–æ—Ç—ã –±—ã–ª–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –∑–Ω–∞—á–µ–Ω–∏—è \( x_1 = 2 \) –∏ \( x_2 = 8 \). –†–µ–∑—É–ª—å—Ç–∞—Ç—ã \( f(x) \) –¥–ª—è –æ–±–æ–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–º–∏: \( f(2) = 16 \) –∏ \( f(8) = 100 \).  


## –≤—ã–≤–æ–¥—ã –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏–π : 

–ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ 
f(x)=(2+x)^2. –ü—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –¥–≤–∞ –∑–Ω–∞—á–µ–Ω–∏—è x1 –∏ x2, –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤—ã—á–∏—Å–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑ –Ω–∏—Ö –∏ –≤—ã–≤–æ–¥–∏—Ç –Ω–∞ —ç–∫—Ä–∞–Ω. –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –∑–Ω–∞—á–µ–Ω–∏—è x1 = 2 –∏ x2 = 8  —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–º–∏ —Ä–∞—Å—á—ë—Ç–∞–º–∏: 
f(2)=16 –∏ f(8)=100.
–†–∞–±–æ—Ç–∞ –ø–æ–∫–∞–∑–∞–ª–∞ –≤–∞–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤ NASM, —Ç–∞–∫–∏—Ö –∫–∞–∫ —Å–ª–æ–∂–µ–Ω–∏–µ, –≤–æ–∑–≤–µ–¥–µ–Ω–∏–µ –≤ –∫–≤–∞–¥—Ä–∞—Ç –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö. –í—Å–µ —ç—Ç–∞–ø—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã, –≤–∫–ª—é—á–∞—è –≤–≤–æ–¥, –æ–±—Ä–∞–±–æ—Ç–∫—É –∏ –≤—ã–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —É—Å–ø–µ—à–Ω–æ.

# –í—ã–≤–æ–¥—ã

–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∞, –∫–∞–∫ —Å –ø–æ–º–æ—â—å—é —è–∑—ã–∫–∞ –∞—Å—Å–µ–º–±–ª–µ—Ä–∞ NASM –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å —Å–ª–æ–∂–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –∏ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –¥–∞–Ω–Ω—ã–º–∏ —Ä–∞–∑–ª–∏—á–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞. –ë—ã–ª–∏ –æ—Å–≤–æ–µ–Ω—ã –∫–ª—é—á–µ–≤—ã–µ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, —Ä–∞–±–æ—Ç–∞ —Å —Ä–µ–≥–∏—Å—Ç—Ä–∞–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤–Ω–µ—à–Ω–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è –≤–≤–æ–¥–∞ –∏ –≤—ã–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö. –í—Å–µ –∑–∞–¥–∞–Ω–∏—è, –≤–∫–ª—é—á–∞—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ –∏ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–µ, –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –∞ –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–º —Ä–∞—Å—á—ë—Ç–∞–º.
